
package public

import "github.com/madalinpopa/gocost-web/ui/templates/layouts"
import "github.com/madalinpopa/gocost-web/internal/interfaces/web"
import "github.com/madalinpopa/gocost-web/ui/templates/components"
import "github.com/madalinpopa/gocost-web/internal/interfaces/web/form"

templ RegisterPage(data web.Data) {
	@layouts.Main(data) {
		<div class="h-full flex flex-col relative overflow-hidden selection:bg-primary-500 selection:text-white">
			<main class="grow flex items-center justify-center px-4 py-16 relative z-10">
				<div class="w-full max-w-sm space-y-10">
					<!-- Header -->
					<div class="text-center space-y-4">
						<div class="inline-flex w-14 h-14 bg-primary-600 rounded-sm items-center justify-center font-bold text-2xl text-slate-950 shadow-[4px_4px_0px_0px_rgba(255,255,255,0.2)]">
							G
						</div>
						<h1 class="text-5xl font-black tracking-tighter text-white">
							REGISTER
						</h1>
						<p class="text-gray-400 text-sm font-medium tracking-wide">
							CREATE YOUR ACCOUNT
						</p>
					</div>
					<!-- Form Container -->
					<div hx-get="/register/form" hx-swap="innerHTML" hx-trigger="load"></div>
					<div class="text-center pt-4">
						<p class="text-gray-500 text-xs uppercase tracking-widest">
							Already have an account?
							<a href="/login" class="text-primary-500 hover:text-white transition-colors ml-1 font-bold">
								LOG IN
							</a>
						</p>
					</div>
				</div>
			</main>
			<!-- Background Decoration -->
			<div class="absolute -left-20 -bottom-40 w-96 h-96 bg-primary-900/10 rounded-full blur-3xl pointer-events-none"></div>
			<div class="absolute -right-20 top-0 w-80 h-80 bg-primary-900/5 rounded-full blur-3xl pointer-events-none"></div>
		</div>
	}
}

templ RegisterForm(f form.RegisterForm) {
	if len(f.NonFieldErrors) > 0 {
		<div class="pb-6">
			for _, err := range f.NonFieldErrors {
				@components.Error(err)
			}
		</div>
	}
	<form hx-post="/register" hx-swap="outerHTML" class="space-y-6">
		<div>
			<label for="email" class="block text-xs font-bold text-primary-500 uppercase tracking-wider mb-2">
				Email
			</label>
			<input
				type="email"
				id="email"
				name="email"
				required
				value={ f.Email }
				class="block w-full px-4 py-3 bg-slate-900 border-2 border-slate-800 text-white placeholder-slate-700 focus:outline-none focus:border-primary-500 focus:bg-slate-950 transition-colors font-medium rounded-none"
				placeholder="user@example.com"
			/>
			@components.FieldError("email", f.FieldErrors)
		</div>
		<div>
			<label for="username" class="block text-xs font-bold text-primary-500 uppercase tracking-wider mb-2">
				Username
			</label>
			<input
				type="text"
				id="username"
				name="username"
				required
				value={ f.Username }
				class="block w-full px-4 py-3 bg-slate-900 border-2 border-slate-800 text-white placeholder-slate-700 focus:outline-none focus:border-primary-500 focus:bg-slate-950 transition-colors font-medium rounded-none"
				placeholder="yourname"
			/>
			@components.FieldError("username", f.FieldErrors)
		</div>
		<div>
			<div class="flex items-center justify-between mb-2">
				<label for="password" class="block text-xs font-bold text-primary-500 uppercase tracking-wider">
					Password
				</label>
			</div>
			<input
				type="password"
				id="password"
				name="password"
				required
				value={ f.Password }
				class="block w-full px-4 py-3 bg-slate-900 border-2 border-slate-800 text-white placeholder-slate-700 focus:outline-none focus:border-primary-500 focus:bg-slate-950 transition-colors font-medium rounded-none"
				placeholder="••••••••"
			/>
			@components.FieldError("password", f.FieldErrors)
		</div>
		<button
			type="submit"
			class="group relative w-full flex justify-center py-4 px-4 bg-primary-600 text-slate-950 font-black text-lg uppercase tracking-wider hover:bg-primary-500 transition-all hover:-translate-y-1 shadow-[4px_4px_0px_0px_rgba(255,255,255,0.1)] hover:shadow-[6px_6px_0px_0px_rgba(255,255,255,0.1)] focus:outline-none rounded-none"
		>
			<span class="htmx-indicator absolute inset-y-0 left-0 flex items-center pl-3">
				<iconify-icon icon="eos-icons:loading" class="h-5 w-5 text-slate-950 animate-spin"></iconify-icon>
			</span>
			CREATE ACCOUNT
		</button>
	</form>
}
